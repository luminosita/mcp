<?xml version="1.0" encoding="UTF-8"?>
<template>
  <metadata>
    <name>Product_Requirements_Document_Template</name>
    <version>1.3</version>
    <source>Section 6.1 of advanced_prompt_engineering_software_docs_code_final.md (lines 630-728), enhanced for Context Engineering Framework</source>
    <sdlc_phase>PRD</sdlc_phase>
    <note>PRDs use numbering scheme: PRD-XXX (e.g., PRD-003). File naming: prd_XXX_feature_name_vN.md (e.g., prd_003_jwt_authentication_v3.md)</note>
    <last_updated>2025-10-12</last_updated>
    <changes>v1.3: Phase 1 Metadata Refinement - Added Parent Epic field, optional Informed By Business Research and Implementation Research fields, Parent Artifact Context section, and Research References section for upstream traceability (downstream tracking deferred to backlog software)</changes>
  </metadata>

  <instructions>
    <guideline>Fill all sections marked with [placeholder]</guideline>
    <guideline>Ensure completeness, clarity, and stakeholder alignment</guideline>
    <guideline>Success metrics must be SMART (Specific, Measurable, Achievable, Relevant, Time-bound)</guideline>
    <guideline>Problem statement must include quantified pain points with data</guideline>
    <guideline>All acceptance criteria must be testable</guideline>
    <guideline>High-level user stories in functional requirements will be tracked in separate TODO.md file in PRD subfolder</guideline>
    <guideline>Each high-level user story should reference specific functional requirements (FR-XX)</guideline>
  </instructions>

  <structure format="markdown">
    <![CDATA[
# PRD: [Product/Feature Name]

## Metadata
- **PRD ID:** PRD-[XXX]
- **Author:** [name]
- **Date:** [date]
- **Version:** [version]
- **Status:** [Draft/In Review/Approved]
- **Parent Epic:** EPIC-[XXX]
- **Informed By Business Research:** [Link - optional for market context]
- **Informed By Implementation Research:** [Link - optional for technical feasibility]

## Parent Artifact Context

**Parent Epic:** [EPIC-XXX: Epic Title]
- **Link:** [URL to Epic document v3]
- **Epic Scope Coverage:** [Which portion of the epic this PRD addresses]
- **Epic Acceptance Criteria Mapping:** [Which epic-level criteria this PRD satisfies]

## Research References

### Business Research (Optional - When Market Context Needed)
**Document:** [Link to Business Research report]

**Applied Insights:**
- **§[X.Y]: [Section Title]:** [Insight relevant to PRD requirements]
- **§[X.Y]: [Section Title]:** [Market data supporting business case]

*Use when PRD requires market validation, competitive positioning, or business model context.*

### Implementation Research (Optional - When Technical Feasibility Needed)
**Document:** [Link to Implementation Research report]

**Applied Insights:**
- **§[X.Y]: [Section Title]:** [Technical feasibility insight]
- **§[X.Y]: [Section Title]:** [Architecture pattern or constraint]

*Use when PRD includes NFRs, technical constraints, or architecture considerations requiring research validation.*

**Note:** PRD is a bridge artifact. Business Research is typically consumed at Epic level, and Implementation Research at Backlog Story level. Only reference research here when needed to inform requirements definition.

## Executive Summary
[2-3 paragraph overview: problem, solution, impact]

## Background & Context
- **Business Context:** [why now]
- **User Research:** [key findings]
- **Market Analysis:** [competitive landscape]

## Problem Statement
**Current State:** [pain points with data]
**Desired State:** [vision]
**Impact if not solved:** [quantified consequences]

## Goals & Success Metrics
| Goal | Metric | Target | Measurement Method |
|------|---------|--------|-------------------|
| [Goal 1] | [Metric] | [Target] | [How measured] |

## User Personas & Use Cases
### Persona 1: [Name]
- **Description:** [demographics, behaviors]
- **Needs:** [primary needs]
- **Use Case:** [specific scenario]

## Requirements

### Functional Requirements
| ID | Requirement | Priority | Acceptance Criteria |
|----|-------------|----------|-------------------|
| FR-01 | [Requirement] | Must-have | [Criteria] |

### Non-Functional Requirements
- **Performance:** [specific targets]
- **Security:** [requirements]
- **Scalability:** [targets]
- **Accessibility:** [WCAG standards]

## User Experience
### User Flows
[Mermaid diagrams or step-by-step flows]

### Wireframes/Mockups
[Link to designs]

## Technical Considerations
- **Architecture:** [high-level approach]
- **Dependencies:** [systems, services]
- **Technical Constraints:** [limitations]
- **Data Model:** [key entities]

## Risks & Mitigations
| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| [Risk 1] | High | Medium | [Strategy] |

## Timeline & Milestones
- Phase 1: [dates] - [deliverables]
- Phase 2: [dates] - [deliverables]

## Open Questions

**PRD is a BRIDGE ARTIFACT: Include both business and strategic technical questions, but defer implementation details to later phases.**

**✅ INCLUDE in PRD Open Questions:**

1. **Business Questions (from Epic or new):**
   - Market priorities and user segment questions
   - Business model and pricing questions
   - Regulatory/compliance uncertainties
   - Strategic timing and resource allocation

2. **Product/Technical Trade-offs (PM + Tech Lead discussion):**
   - Questions balancing user experience with technical constraints
   - Build vs. buy decisions affecting timeline and features
   - Architecture approach questions affecting product decisions
   - Technical feasibility questions impacting requirements or scope

**❌ DEFER to ADR/Tech Spec phases:**
- Specific implementation details (algorithms, data structures, patterns)
- Granular technology choices (library selection, specific tools)
- Low-level architecture decisions not affecting product requirements
- Questions answerable during implementation without stakeholder input

---

**Examples of PRD-APPROPRIATE questions:**

[BUSINESS] "Should we prioritize enterprise customers or SMB users in the initial release?"

[TECHNICAL] "Should we prioritize offline-first capability or real-time sync in V1?" (affects user experience and architecture)

[TECHNICAL] "What authentication approach balances user experience with security requirements?" (affects NFRs and user flows)

[TECHNICAL] "Should we build notification infrastructure or integrate with third-party service?" (build vs. buy decision)

---

**Examples of questions to DEFER (for ADR/Tech Spec):**

- "Should we use Redis or Memcached for caching?" (specific technology choice - ADR)
- "What specific encryption algorithm for data at rest?" (implementation detail - Tech Spec)
- "Should we use repository or active record pattern?" (low-level design - Tech Spec)

---

**If no open questions exist, state:** "No open questions at this time. Technical implementation details will be addressed in ADR and Technical Specification phases."

---

- [Question 1 - mark as [BUSINESS] or [TECHNICAL]]
- [Question 2 - mark as [BUSINESS] or [TECHNICAL]]

## Related Documents
- **Parent Epic:** [EPIC-XXX Link]
- **Business Research:** [Link - if referenced]
- **Implementation Research:** [Link - if referenced]

## Appendix
[Additional context, research data]
    ]]>
  </structure>

  <process>
    <step>CLARIFY requirements through questions</step>
    <step>STRUCTURE document with standard sections</step>
    <step>VALIDATE completeness against checklist</step>
    <step>ITERATE based on stakeholder feedback</step>
  </process>

  <examples>
    <example source="Section 6.1">
      See research document for comprehensive PRD example with slot-filling process
    </example>
  </examples>
</template>
